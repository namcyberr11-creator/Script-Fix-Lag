-- VUKHOA FIX LAG ULTIMATE: BIG TEXT & FPS
local RunService = game:GetService("RunService")
local CoreGui = game:GetService("CoreGui")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Lighting = game:GetService("Lighting")

-- 1. GIAO DIỆN VUKHOA FIXLAG (CHỮ TO - ĐEN VIỀN TRẮNG)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "VuKhoaUI_Big"
ScreenGui.Parent = CoreGui

local Label = Instance.new("TextLabel")
Label.Parent = ScreenGui
Label.BackgroundTransparency = 1
Label.Position = UDim2.new(0.5, -250, 0.05, 0) -- Căn giữa
Label.Size = UDim2.new(0, 500, 0, 100) -- Tăng kích thước khung để chứa chữ to
Label.Font = Enum.Font.SourceSansBold
Label.TextSize = 50 -- ĐÃ TĂNG CHỮ TO LÊN (Mặc định cũ là 35)
Label.TextColor3 = Color3.fromRGB(0, 0, 0) -- Màu đen
Label.TextStrokeColor3 = Color3.fromRGB(255, 255, 255) -- Viền trắng
Label.TextStrokeTransparency = 0 
Label.TextWrapped = false -- Đảm bảo chữ không bị tự xuống dòng sai cách

-- Cập nhật FPS To
local lastUpdate = 0
RunService.RenderStepped:Connect(function(dt)
    if tick() - lastUpdate >= 0.5 then
        Label.Text = "VuKhoa FixLag\nFPS: " .. math.floor(1/dt)
        lastUpdate = tick()
    end
end)

-- 2. HÀM TỐI ƯU HÓA CHI TIẾT
local function CleanEffects(v)
    -- Xóa số sát thương (Damage Indicators)
    if v.Name == "DamageIndicator" or v:IsA("BillboardGui") then
        v:Destroy()
    end
    
    -- Xóa hiệu ứng hạt (Particles), Vệt kỹ năng (Trails)
    if v:IsA("ParticleEmitter") or v:IsA("Trail") or v:IsA("Beam") then
        v.Enabled = false
    end

    -- Lọc ẩn hiệu ứng tộc V4, Soul Guitar và Skill
    local lowName = v.Name:lower()
    if lowName:find("skill") or lowName:find("effect") or lowName:find("slash") or 
       lowName:find("hit") or lowName:find("skull") or lowName:find("soul") or
       lowName:find("v4") or lowName:find("transformation") then
        
        if v:IsA("Model") or v:IsA("MeshPart") or v:IsA("SpecialMesh") then
            v:Destroy()
        end
    end
end

-- 3. CHẠY FIX LAG TỔNG THỂ
Lighting.GlobalShadows = false
Lighting.FogEnd = 9e9
settings().Rendering.QualityLevel = 1

-- Ẩn Map 80% và Xóa Cây (Giữ va chạm)
for _, v in pairs(workspace:GetDescendants()) do
    if v:IsA("BasePart") and not v:IsDescendantOf(game.Players.LocalPlayer.Character) then
        local n = v.Name:lower()
        if n:find("tree") or n:find("leaf") or n:find("bush") then
            v:Destroy()
        elseif v:IsA("MeshPart") or v:IsA("UnionOperation") then
            v.Transparency = 0.8 -- Trong suốt 80% theo yêu cầu trước đó
        end
    end
end

-- Theo dõi xóa dame và hiệu ứng mới
workspace.DescendantAdded:Connect(CleanEffects)
ReplicatedStorage.ChildAdded:Connect(CleanEffects)

-- Dọn dẹp Workspace định kỳ
spawn(function()
    while wait(1) do
        for _, v in pairs(workspace:GetChildren()) do
            if v.Name == "Effect" or v.Name == "Attack" then
                v:Destroy()
            end
        end
    end
end)

print("VuKhoa FixLag - Bản Chữ To đã tải!")
